---
title: Next.js Minimal Starter
description: Complete guide to the Next.js-based starter template
---

# Next.js Minimal Starter

The Next.js Minimal starter is a modern, production-ready application built with Next.js 15, TypeScript, and React 19. It demonstrates advanced integration patterns and includes features like authentication, state management, and a full course/lesson system.

## Architecture

The Next.js Minimal starter uses the App Router architecture:

```
nextjs-minimal/
├── app/
│   ├── page.tsx                    # Home page
│   ├── layout.tsx                  # Root layout
│   ├── analysis/
│   │   ├── page.tsx                # Analysis page
│   │   ├── hooks/
│   │   │   └── useSessionManagement.ts  # Session management hook
│   │   └── components/
│   │       ├── ToughTongueIframe.tsx
│   │       ├── SessionInformation.tsx
│   │       ├── DataDisplay.tsx
│   │       └── ErrorDisplay.tsx
│   ├── course/
│   │   ├── page.tsx                # Course page
│   │   └── CourseClient.tsx        # Course client component
│   ├── api/
│   │   └── tough-tongue/
│   │       ├── scenarios/
│   │       │   └── route.ts        # Create scenarios
│   │       └── sessions/
│   │           ├── [sessionId]/
│   │           │   └── route.ts    # Get session details
│   │           └── analyze/
│   │               └── route.ts    # Analyze session
│   ├── store/
│   │   └── sessionStore.ts         # Zustand state management
│   └── sign-in/                    # Clerk authentication
├── components/
│   ├── ui/                         # shadcn/ui components
│   ├── FeatureCard.tsx
│   ├── Header.tsx
│   └── MediaEmbed.tsx
├── middleware.ts                   # Clerk middleware
└── package.json
```

## Features

- **TypeScript**: Full type safety throughout the application
- **Next.js App Router**: Modern React Server Components architecture
- **Clerk Authentication**: Built-in user authentication
- **Zustand State Management**: Lightweight, performant state management
- **API Routes**: Server-side API integration with ToughTongue AI
- **Tailwind CSS**: Utility-first styling with dark mode support
- **Course System**: Full-featured course/lesson management
- **Session Analysis**: Complete session tracking and analysis

## Setup

### 1. Install Dependencies

```bash
cd nextjs-minimal
pnpm install
```

### 2. Configure Environment Variables

Create a `.env.local` file:

```env
# ToughTongue AI
TOUGH_TONGUE_API_KEY=your_api_token_here

# Clerk Authentication (optional)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key
```

### 3. Set Up Clerk (Optional)

1. Create an account at [Clerk](https://clerk.com/)
2. Create a new application
3. Copy your publishable key and secret key
4. Add them to `.env.local`

If you don't want authentication, you can remove Clerk-related code from `middleware.ts` and the sign-in/sign-up pages.

### 4. Update Scenario IDs

Update scenario IDs in your components. For example, in `app/analysis/components/ToughTongueIframe.tsx`:

```typescript
const scenarioId = "YOUR_SCENARIO_ID_HERE";
```

### 5. Run the Application

```bash
pnpm dev
```

The application will start at `http://localhost:3000`.

## Project Structure

### API Routes

#### POST `/api/tough-tongue/scenarios`

Create a new scenario:

```typescript
const response = await fetch('/api/tough-tongue/scenarios', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: 'Scenario Name',
    description: 'Description',
    ai_instructions: 'AI instructions...',
    user_friendly_description: 'User-facing description'
  })
});
```

#### GET `/api/tough-tongue/sessions/[sessionId]`

Get session details:

```typescript
const response = await fetch(`/api/tough-tongue/sessions/${sessionId}`);
const data = await response.json();
```

#### POST `/api/tough-tongue/sessions/analyze`

Analyze a session:

```typescript
const response = await fetch('/api/tough-tongue/sessions/analyze', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ session_id: sessionId })
});
```

### State Management

The application uses Zustand for state management (`app/store/sessionStore.ts`):

```typescript
import { useSessionStore } from '@/app/store/sessionStore';

const { sessionId, sessionData, setSessionId } = useSessionStore();
```

### Custom Hook

The `useSessionManagement` hook (`app/analysis/hooks/useSessionManagement.ts`) provides:

- Session event listening
- Session details fetching
- Session analysis
- Error handling
- Loading states

## Integration Guide

### Step 1: Embed the Iframe

Use the `ToughTongueIframe` component:

```typescript
import ToughTongueIframe from './components/ToughTongueIframe';

<ToughTongueIframe />
```

Or create your own:

```typescript
<iframe
  src={`https://app.toughtongueai.com/embed/${scenarioId}?bg=black`}
  width="100%"
  height="600px"
  frameBorder="0"
  allow="microphone"
/>
```

### Step 2: Listen for Events

The `useSessionManagement` hook automatically listens for iframe events:

```typescript
useEffect(() => {
  const handleIframeEvents = (event: MessageEvent) => {
    const data = event.data;
    if (data && data.event) {
      switch (data.event) {
        case 'onStart':
          // Session started
          break;
        case 'onStop':
          // Session stopped
          setSessionId(data.sessionId);
          break;
      }
    }
  };
  window.addEventListener('message', handleIframeEvents);
  return () => window.removeEventListener('message', handleIframeEvents);
}, []);
```

### Step 3: Analyze Sessions

Use the hook's `analyzeSession` function:

```typescript
const { analyzeSession, sessionAnalysis } = useSessionManagement();

// After session completes
await analyzeSession();
// Results available in sessionAnalysis
```

## Pages

### Home Page (`app/page.tsx`)

Landing page with:
- Feature cards
- Course modules overview
- Call-to-action buttons

### Analysis Page (`app/analysis/page.tsx`)

Complete session analysis interface:
- Embedded ToughTongue AI iframe
- Session information display
- Analysis results
- Error handling

### Course Page (`app/course/page.tsx`)

Full course/lesson system:
- Lesson sidebar navigation
- Media embedding (YouTube, Loom, ToughTongue AI)
- Lesson progression
- Responsive design

## Customization

### Styling

The project uses Tailwind CSS. Customize in:

- `tailwind.config.ts` - Tailwind configuration
- `app/globals.css` - Global styles
- Component files - Inline Tailwind classes

### Adding New Pages

1. Create a new directory in `app/`
2. Add `page.tsx` file
3. Export default component
4. Add navigation links as needed

### Adding New API Routes

1. Create route file in `app/api/`
2. Export HTTP method handlers (`GET`, `POST`, etc.)
3. Use `NextResponse` for responses

Example:

```typescript
import { NextResponse } from 'next/server';

export async function GET() {
  return NextResponse.json({ message: 'Hello' });
}
```

## Deployment

### Vercel (Recommended)

1. Push your code to GitHub
2. Import project in Vercel
3. Add environment variables
4. Deploy

The project is optimized for Vercel with:
- Serverless API routes
- Static page optimization
- Edge runtime support

### Other Platforms

For other platforms (Netlify, Railway, etc.):

1. Build: `pnpm build`
2. Start: `npm start`
3. Set environment variables
4. Configure Node.js version (18+)

## Authentication

The starter includes Clerk authentication. To disable:

1. Remove Clerk from `package.json`
2. Remove `middleware.ts` or remove Clerk logic
3. Remove `app/sign-in/` and `app/sign-up/` directories
4. Remove authentication checks from pages

## Best Practices

1. **Type Safety**: Use TypeScript types for all API responses
2. **Error Handling**: Always handle errors in API routes and components
3. **Loading States**: Show loading indicators during async operations
4. **Environment Variables**: Never commit `.env.local`
5. **API Security**: Keep API keys server-side only
6. **State Management**: Use Zustand for client state, React Server Components for server state

## Troubleshooting

### Build Errors

- Ensure Node.js 18+ is installed
- Clear `.next` directory: `rm -rf .next`
- Reinstall dependencies: `rm -rf node_modules && pnpm install`

### API Errors

- Verify `TOUGH_TONGUE_API_KEY` is set
- Check API token hasn't expired
- Review API route error handling

### Authentication Issues

- Verify Clerk keys are correct
- Check middleware configuration
- Review Clerk dashboard settings

## Next Steps

- Explore the [API Integration Guide](/integration/api-reference)
- Learn about [Deployment Options](/integration/deployment)
- Review [Best Practices](/integration/best-practices)
- Check out the [Flask Minimal Starter](/starters/flask-minimal) for a simpler alternative
